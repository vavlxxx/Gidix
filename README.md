# Информационная система управления экскурсионными маршрутами (MVP)

Проект реализует MVP веб-приложения для туристической компании: публичный каталог экскурсионных маршрутов, оформление заявок и административная панель для менеджеров и администраторов.

## Что включено
- Публичный каталог маршрутов с карточками и детальной страницей.
- Интерактивная карта маршрута (OpenStreetMap + Leaflet).
- Форма подачи заявки с валидацией и согласиями.
- Админ-панель: маршруты, заявки, пользователи.
- JWT-аутентификация и роли (менеджер, администратор).
- PostgreSQL, REST API на FastAPI.

## Быстрый старт через Docker

```bash
docker compose up --build
```

После запуска:
- Фронтенд: http://localhost:5173
- Бэкенд: http://localhost:8000
- Документация API: http://localhost:8000/api/docs

## Учетные записи по умолчанию
- Администратор: `admin@example.com` / `admin123`
- Менеджер: `manager@example.com` / `manager123`

## Локальный запуск без Docker

### Бэкенд

```bash
cd backend
python -m venv .venv
. .venv/Scripts/activate  # Windows PowerShell
pip install -r requirements.txt
uvicorn app.main:app --reload
```

Переменные окружения (необязательно):
- `DATABASE_URL`
- `SECRET_KEY`
- `CORS_ORIGINS`

### Фронтенд

```bash
cd frontend
npm install
npm run dev
```

## Структура репозитория
- `backend/` — FastAPI, модели БД, REST API
- `frontend/` — React-приложение (Vite)
- `docker-compose.yml` — запуск всех сервисов

## Особенности MVP
- Описание маршрута поддерживает Markdown (например, `**жирный**`, `*курсив*`).
- Для построения маршрута используется полилиния по точкам, расстояние считается по прямой (Haversine).
- Загрузка фото работает через `/api/uploads` и сохраняет файлы локально.

## Сидирование данных
При первом запуске автоматически создаются:
- учетные записи администратора и менеджера;
- тестовые маршруты, точки интереса, заявки.

---

Если нужно расширить функционал (онлайн-оплата, календарь, интеграция с гидами), можно использовать текущую структуру как базу.
